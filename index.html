<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>é©¬åˆ°åŠŸæˆ 2026 - GHL Edition</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Firebase SDKs -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        window.FB_SDK = { initializeApp, getAuth, signInAnonymously, onAuthStateChanged, signInWithCustomToken, getFirestore, collection, addDoc, serverTimestamp };
    </script>

    <style>
        /* æ ¸å¿ƒåŠ¨ç”» */
        @keyframes float-up-fast {
            0% { transform: translateY(0) scale(0.5); opacity: 0; }
            20% { opacity: 1; transform: translateY(-30px) scale(1.3); }
            100% { transform: translateY(-120px) scale(1); opacity: 0; }
        }
        .animate-float-up-fast { animation: float-up-fast 0.9s ease-out forwards; }

        @keyframes bounce-short { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }
        .animate-bounce-short { animation: bounce-short 0.5s ease-in-out infinite; }

        @keyframes swing {
            0% { transform: rotate(-5deg); transform-origin: top center; }
            50% { transform: rotate(5deg); transform-origin: top center; }
            100% { transform: rotate(-5deg); transform-origin: top center; }
        }
        .animate-swing { animation: swing 3s ease-in-out infinite; }

        @keyframes gallop-bg {
            0% { transform: translateX(250%) scale(var(--horse-scale, 0.8)); opacity: 0; }
            10% { opacity: var(--horse-opacity, 0.15); }
            90% { opacity: var(--horse-opacity, 0.15); }
            100% { transform: translateX(-150%) scale(var(--horse-scale, 0.8)); opacity: 0; }
        }
        .animate-gallop-bg { animation: gallop-bg var(--horse-speed, 10s) linear infinite; }

        .scale-in-center { animation: scale-in-center 0.4s cubic-bezier(0.175, 0.885, 0.320, 1.275) both; }
        @keyframes scale-in-center { 0% { transform: scale(0); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
        
        body, html { 
            margin: 0; 
            padding: 0; 
            height: 100%; 
            overflow: hidden; 
            background-color: #b91c1c; 
        }
        #root { height: 100vh; position: relative; z-index: 10; display: flex; align-items: center; justify-content: center; }

        @media (orientation: landscape) and (max-height: 500px) {
            .game-panel {
                height: 74vh !important; 
                width: auto !important;
                aspect-ratio: 16 / 9;
                border-width: 4px !important;
                border-radius: 1.5rem !important;
            }
            .game-header { padding: 0.2rem 0.6rem !important; }
            .start-modal { padding: 1rem !important; }
            .start-modal h1 { font-size: 1.75rem !important; margin-bottom: 0.4rem !important; }
            .start-modal button { padding: 0.5rem 1.5rem !important; font-size: 1.25rem !important; }
            .disclaimer-text { font-size: 6px !important; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useCallback, useRef } = React;

        const IconPlay = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
        );
        const IconTrophy = () => (
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6M18 9h1.5a2.5 2.5 0 0 0 0-5H18M4 22h16M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22M18 2H6v7a6 6 0 0 0 12 0V2Z"></path></svg>
        );
        const IconTimer = () => (
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
        );
        const IconRotate = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8M3 3v5h5"></path></svg>
        );
        const IconVolume2 = () => (
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M15.54 8.46a5 5 0 0 1 0 7.07M19.07 4.93a10 10 0 0 1 0 14.14"></path></svg>
        );
        const IconVolumeX = () => (
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><line x1="23" y1="9" x2="17" y2="15"></line><line x1="17" y1="9" x2="23" y2="15"></line></svg>
        );

        const PLAYLIST = [
            "https://storage.googleapis.com/msgsndr/CRFp3DFW7bydKl8ceIKU/media/698d5416cfbcd78333721e04.wav",
            "https://storage.googleapis.com/msgsndr/CRFp3DFW7bydKl8ceIKU/media/698d54167f6dcfd23737a244.wav",
            "https://storage.googleapis.com/msgsndr/CRFp3DFW7bydKl8ceIKU/media/698d5416cfbcd7273c721e06.wav",
            "https://storage.googleapis.com/msgsndr/CRFp3DFW7bydKl8ceIKU/media/698d5416bfe00f9556f74c46.wav",
            "https://storage.googleapis.com/msgsndr/CRFp3DFW7bydKl8ceIKU/media/698d5416bfda3c4d513b1fa4.wav",
            "https://storage.googleapis.com/msgsndr/CRFp3DFW7bydKl8ceIKU/media/698d5416cfbcd70b18721e05.wav",
            "https://storage.googleapis.com/msgsndr/CRFp3DFW7bydKl8ceIKU/media/698d541652c9529751260071.wav"
        ];

        // æ¶¦è‰²åçš„åŒè¯­ç¥ç¦è¯­
        const HORSE_WISHES = [
            { zh: "é©¬ä¸Šæš´å¯Œ", en: "Instant Wealth" },
            { zh: "é©¬åˆ°å·…å³°", en: "Peak Performance" },
            { zh: "é©¬ä¸Šå¼€æŒ‚", en: "Level Up Instantly" },
            { zh: "å…¨å¹´ç‹‚é£™", en: "Unstoppable Year" },
            { zh: "èº«ä»·ç¿»å€", en: "Double Your Worth" },
            { zh: "æµé‡çˆ†æ£š", en: "Viral Success" },
            { zh: "é©¬ä¸Šå‡ºåœˆ", en: "Break the Internet" },
            { zh: "é©¬ä¸Šæˆäº¤", en: "Close Deals Swiftly" },
            { zh: "ä¸šç»©é£™å‡", en: "Performance Surge" },
            { zh: "é©¬ä¸Šå‡çº§", en: "Immediate Upgrade" },
            { zh: "è´¢æºæ»šæ»š", en: "Rolling in Riches" },
            { zh: "é©¬ä¸Šç­¾å•", en: "Instant Contracts" },
            { zh: "é©¬ä¸Šèººèµ¢", en: "Effortless Wins" },
            { zh: "é©¬ä¸Šçªç ´", en: "Breakthrough Growth" },
            { zh: "ä¸€é©¬å½“å…³", en: "Leading the Charge" },
            { zh: "é©¬åˆ°åŠŸæˆ", en: "Swift Achievement" }
        ];

        const TEXTS = {
            zh: {
                title: "é©¬åˆ°åŠŸæˆ",
                subtitle: "Visit Malaysia 2026 Special",
                startBtn: "å¼€å§‹æ¥ç¦",
                musicHint: "ç‚¹å‡»æŒ‰é’®è§£é”å¤§é©¬è´ºå²é‡‘æ›² ğŸµ",
                score: "åˆ†æ•°",
                time: "æ—¶é—´",
                gameHint: "ç‚¹å‡»é©¬å„¿ï¼Œæ”¶é›†æ–°å¹´ç¥ç¦ï¼",
                resultTitle: "HENG ONG HUAT!",
                resultBody: "ä½ åœ¨ 2026 é©¬å¹´æ¥åˆ°äº†",
                resultUnit: "åˆ†å¥½è¿ï¼",
                retry: "å†ç©ä¸€æ¬¡",
                huat: "Huat å•Š!"
            },
            en: {
                title: "Swift Success",
                subtitle: "Visit Malaysia 2026 Special",
                startBtn: "Catch Blessings",
                musicHint: "Tap to unlock MY Festive Hits ğŸµ",
                score: "Score",
                time: "Time",
                gameHint: "Tap the horses to catch blessings!",
                resultTitle: "HENG ONG HUAT!",
                resultBody: "You've captured",
                resultUnit: "Points of Luck!",
                retry: "Play Again",
                huat: "Huat Ah!"
            }
        };

        const HorseGameApp = () => {
            const [lang, setLang] = useState('zh');
            const [gameState, setGameState] = useState('START');
            const [score, setScore] = useState(0);
            const [timeLeft, setTimeLeft] = useState(25);
            const [activeHorses, setActiveHorses] = useState([]);
            const [currentWish, setCurrentWish] = useState('');
            const [isMuted, setIsMuted] = useState(false);
            const [hasInteracted, setHasInteracted] = useState(false);
            const [floatingTexts, setFloatingTexts] = useState([]);
            const [currentSongUrl, setCurrentSongUrl] = useState('');
            const [user, setUser] = useState(null);

            const gameAreaRef = useRef(null);
            const audioRef = useRef(null);

            const t = TEXTS[lang];

            useEffect(() => {
                const initTracking = async () => {
                    if (!window.FB_SDK) return;
                    const { initializeApp, getAuth, signInAnonymously, onAuthStateChanged, signInWithCustomToken, getFirestore, collection, addDoc, serverTimestamp } = window.FB_SDK;
                    const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
                    const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
                    if (!firebaseConfig.apiKey) return;
                    try {
                        const app = initializeApp(firebaseConfig);
                        const auth = getAuth(app);
                        const db = getFirestore(app);
                        if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                            await signInWithCustomToken(auth, __initial_auth_token);
                        } else {
                            await signInAnonymously(auth);
                        }
                        onAuthStateChanged(auth, async (u) => {
                            if (u && !user) {
                                setUser(u);
                                try {
                                    const geoRes = await fetch('https://ipapi.co/json/');
                                    const geoData = await geoRes.json();
                                    await addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'analytics'), {
                                        uid: u.uid,
                                        timestamp: serverTimestamp(),
                                        city: geoData.city || 'æœªçŸ¥',
                                        country: geoData.country_name || 'æœªçŸ¥',
                                        lang: lang,
                                        action: 'visit'
                                    });
                                } catch (e) {
                                    await addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'analytics'), {
                                        uid: u.uid,
                                        timestamp: serverTimestamp(),
                                        action: 'visit_basic'
                                    });
                                }
                            }
                        });
                    } catch (e) { console.error("Tracking Error:", e); }
                };
                initTracking();
            }, [user, lang]);

            useEffect(() => {
                const randomUrl = PLAYLIST[Math.floor(Math.random() * PLAYLIST.length)];
                setCurrentSongUrl(randomUrl);
            }, []);

            const spawnHorse = useCallback(() => {
                if (gameState !== 'PLAYING') return;
                const id = Date.now() + Math.random();
                const x = Math.random() * 75 + 12; 
                const y = Math.random() * 60 + 15;
                const size = Math.random() * 40 + 120;
                const wishPair = HORSE_WISHES[Math.floor(Math.random() * HORSE_WISHES.length)];
                setActiveHorses(prev => [...prev, { id, x, y, size, wish: wishPair[lang] }]);
                setTimeout(() => setActiveHorses(prev => prev.filter(h => h.id !== id)), 1300);
            }, [gameState, lang]);

            useEffect(() => {
                let spawnInterval;
                let timerInterval;
                if (gameState === 'PLAYING') {
                    spawnInterval = setInterval(spawnHorse, 650);
                    timerInterval = setInterval(() => {
                        setTimeLeft(prev => {
                            if (prev <= 1) { setGameState('END'); return 0; }
                            return prev - 1;
                        });
                    }, 1000);
                }
                return () => {
                    if (spawnInterval) clearInterval(spawnInterval);
                    if (timerInterval) clearInterval(timerInterval);
                };
            }, [gameState, spawnHorse]);

            const startAudio = () => {
                setHasInteracted(true);
                const AudioCtx = window.AudioContext || window.webkitAudioContext;
                if (AudioCtx) {
                    const ctx = new AudioCtx();
                    if (ctx.state === 'suspended') ctx.resume();
                }
                if (audioRef.current) {
                    audioRef.current.muted = false;
                    audioRef.current.play().catch(e => console.log("Audio Play Blocked"));
                }
            };

            const startGame = (e) => {
                if (e) e.stopPropagation();
                startAudio();
                setScore(0);
                setTimeLeft(25);
                setActiveHorses([]);
                setGameState('PLAYING');
                setCurrentWish(t.gameHint);
            };

            const toggleMute = (e) => {
                if (e) e.stopPropagation();
                const newMute = !isMuted;
                setIsMuted(newMute);
                if (audioRef.current) {
                    audioRef.current.muted = newMute;
                    if (!newMute) audioRef.current.play();
                }
            };

            const handleCatch = (id, wish, e) => {
                if (e) e.stopPropagation();
                setScore(prev => prev + 18);
                setCurrentWish(wish);
                setActiveHorses(prev => prev.filter(h => h.id !== id));
                const rect = gameAreaRef.current.getBoundingClientRect();
                const clientX = e.clientX || (e.touches && e.touches[0].clientX);
                const clientY = e.clientY || (e.touches && e.touches[0].clientY);
                const correctedFloat = { id: Date.now(), x: clientX - rect.left, y: clientY - rect.top, text: `${t.huat} ${wish}` };
                setFloatingTexts(prev => [...prev, correctedFloat]);
                setTimeout(() => setFloatingTexts(prev => prev.filter(f => f.id !== correctedFloat.id)), 800);
            };

            const GameDisclaimer = () => (
                <div className="w-full px-4 py-1 mt-2 text-[7.5px] sm:text-[9px] leading-tight text-red-900/50 font-medium border-t border-red-900/10 text-center select-none disclaimer-text space-y-1">
                    <p className="tracking-tighter italic">Disclaimer: This game is created exclusively for the 2026 CNY celebration. Non-commercial use only. The developer shall not be held liable for any misuse. å…è´£å£°æ˜ï¼šæœ¬æ¸¸æˆä»…ä¾›2026é©¬å¹´æ–°æ˜¥åº†ç¥ç”¨é€”ï¼Œä¸¥ç¦å•†ä¸šä½¿ç”¨ã€‚å¼€å‘è€…å¯¹è¯¯ç”¨ä¸æ‰¿æ‹…è´£ä»»ã€‚</p>
                    <div className="pt-1 opacity-80 border-t border-red-900/5 mt-1">
                        <p className="font-bold underline uppercase tracking-tighter text-[7px]">Music Copyright: Zheng Bingyen (Bingyen), 2026 CNY Series.</p>
                    </div>
                </div>
            );

            return (
                <div className="h-full w-full bg-[#b91c1c] font-sans text-white overflow-hidden flex flex-col items-center justify-center p-1 sm:p-2" onClick={startAudio}>
                    {hasInteracted && currentSongUrl && <audio ref={audioRef} src={currentSongUrl} autoPlay loop muted={isMuted} />}

                    {/* åŠ¨æ€å¥”é©¬èƒŒæ™¯ */}
                    <div className="absolute top-1/2 left-0 w-full h-32 pointer-events-none overflow-hidden">
                        <div className="animate-gallop-bg text-8xl sm:text-9xl select-none opacity-5" style={{ '--horse-speed': '10s', '--horse-scale': '1.2' }}>ğŸ</div>
                    </div>

                    {/* åº•éƒ¨é‡‘é©¬é˜µåˆ— */}
                    <div className="absolute bottom-0 left-0 w-full h-44 pointer-events-none overflow-hidden z-0">
                        <div className="animate-gallop-bg text-4xl" style={{ animationDelay: '2s', animationDuration: '13s', bottom: '115px', '--horse-opacity': '0.15', '--horse-scale': '0.5', filter: 'sepia(1) saturate(5) hue-rotate(15deg) brightness(1.3) blur(1.5px)', position: 'absolute' }}>ğŸ</div>
                        <div className="animate-gallop-bg text-6xl" style={{ animationDelay: '4s', animationDuration: '9s', bottom: '65px', '--horse-opacity': '0.3', '--horse-scale': '0.85', filter: 'sepia(1) saturate(8) hue-rotate(20deg) brightness(1.4) drop-shadow(0 0 10px rgba(251,191,36,0.4))', position: 'absolute' }}>ğŸ</div>
                        <div className="animate-gallop-bg text-[10rem]" style={{ animationDelay: '0s', animationDuration: '6s', bottom: '-10px', '--horse-opacity': '0.5', '--horse-scale': '1.3', filter: 'sepia(1) saturate(20) hue-rotate(20deg) brightness(1.6) drop-shadow(0 0 25px #fbbf24)', position: 'absolute' }}>ğŸ</div>
                    </div>

                    {/* ç¯ç¬¼æŒ‚é¥° */}
                    <div className="absolute top-0 left-0 w-full flex justify-around opacity-40 pointer-events-none">
                        {[1, 2, 3, 4, 5, 6].map(i => (
                            <div key={i} className="animate-swing w-0.5 sm:w-1 bg-yellow-500 h-16 sm:h-24 flex flex-col items-center">
                                <div className="w-8 h-10 sm:w-12 sm:h-16 bg-red-600 rounded-md sm:rounded-lg border border-yellow-400 flex items-center justify-center text-sm sm:text-xl font-bold text-yellow-300">ç¦</div>
                            </div>
                        ))}
                    </div>

                    {/* é¡¶éƒ¨æ§åˆ¶æ  - å·²å‘å·¦ç§»åŠ¨å¹¶å¢åŠ å†…éƒ¨é—´è· */}
                    <div className="fixed top-4 right-4 z-50 flex items-center gap-2">
                        <div className="bg-black/40 p-1.5 rounded-full backdrop-blur-md border border-white/20 flex items-center gap-3">
                            <button 
                                onClick={(e) => { e.stopPropagation(); setLang(lang === 'zh' ? 'en' : 'zh'); }}
                                className="bg-white/10 hover:bg-white/30 text-[9px] font-black w-8 h-8 rounded-full transition-all uppercase tracking-tighter flex items-center justify-center border border-white/10"
                            >
                                {lang === 'zh' ? 'EN' : 'ä¸­'}
                            </button>
                            <button onClick={toggleMute} className="bg-yellow-500 w-8 h-8 rounded-full text-red-800 transition-transform active:scale-90 shadow-lg flex items-center justify-center">
                                {isMuted ? <IconVolumeX /> : <IconVolume2 />}
                            </button>
                        </div>
                    </div>

                    {/* æ¸¸æˆé¢æ¿ */}
                    <div className="game-panel w-full h-full max-w-[72vw] max-h-[72vh] bg-[#fffcf5] rounded-[1.5rem] sm:rounded-[2.5rem] shadow-2xl border-[4px] sm:border-[8px] border-yellow-500 relative overflow-hidden flex flex-col transition-all z-10">
                        <div className="game-header bg-gradient-to-r from-red-800 via-red-600 to-red-800 p-2 sm:p-3 flex justify-between items-center text-yellow-400 font-black z-10 shadow-md text-xs sm:text-base">
                            <div className="bg-yellow-500/20 px-3 py-1 rounded-full border border-yellow-500/30 flex items-center gap-1.5 uppercase">
                                <IconTrophy /> <span>{t.score} {score}</span>
                            </div>
                            <div className="text-sm sm:text-2xl tracking-widest uppercase font-serif text-center flex-grow">{t.title}</div>
                            <div className="bg-black/20 px-3 py-1 rounded-full border border-white/20 flex items-center gap-1.5 uppercase">
                                <IconTimer /> <span>{t.time} {timeLeft}s</span>
                            </div>
                        </div>

                        <div ref={gameAreaRef} className="flex-grow relative bg-[url('https://www.transparenttextures.com/patterns/oriental-tiles.png')] bg-repeat overflow-hidden flex flex-col">
                            {gameState === 'START' && (
                                <div className="absolute inset-0 z-20 flex flex-col items-center justify-center bg-red-950/40 backdrop-blur-[2px] p-2 sm:p-6 text-center">
                                    <div className="start-modal bg-white/95 p-4 sm:p-10 rounded-[2rem] sm:rounded-[3rem] border-2 sm:border-4 border-yellow-500 shadow-2xl scale-in-center flex flex-col items-center max-w-[95%] sm:max-w-[90%]">
                                        <div className="text-5xl sm:text-7xl mb-1 sm:mb-4 animate-bounce">ğŸ</div>
                                        <h1 className="text-3xl sm:text-5xl font-black text-red-600 mb-1 tracking-tighter uppercase">{t.title}</h1>
                                        <p className="text-red-800 font-bold mb-3 sm:mb-8 opacity-70 tracking-widest uppercase text-[10px] sm:text-sm">{t.subtitle}</p>
                                        <button onClick={startGame} className="group relative bg-red-600 hover:bg-red-700 text-yellow-300 px-8 py-3 sm:px-16 sm:py-5 rounded-full text-xl sm:text-4xl font-black shadow-[0_6px_0_#7f1d1d] active:translate-y-1 active:shadow-none transition-all flex items-center gap-3 mb-2 sm:mb-4 uppercase tracking-tighter">
                                            <IconPlay /> {t.startBtn}
                                        </button>
                                        <p className="text-red-900/50 text-[8px] sm:text-[10px] font-bold mb-2 uppercase">{t.musicHint}</p>
                                        <GameDisclaimer />
                                    </div>
                                </div>
                            )}

                            {gameState === 'PLAYING' && (
                                <div className="relative h-full w-full">
                                    {activeHorses.map(horse => (
                                        <button key={horse.id} onClick={(e) => handleCatch(horse.id, horse.wish, e)} style={{ left: `${horse.x}%`, top: `${horse.y}%`, width: `clamp(90px, ${horse.size}px, 160px)`, height: `clamp(90px, ${horse.size}px, 160px)` }} className="absolute animate-bounce-short transform -translate-x-1/2 -translate-y-1/2 active:scale-125 transition-transform">
                                            <span className="text-6xl sm:text-9xl select-none block drop-shadow-lg">ğŸ</span>
                                        </button>
                                    ))}
                                    <div className="absolute bottom-4 sm:bottom-8 left-0 w-full flex justify-center z-10 px-4">
                                        <div className="bg-red-600 text-yellow-300 px-6 py-3 sm:px-14 sm:py-5 rounded-2xl sm:rounded-[2.5rem] font-black text-lg sm:text-4xl shadow-2xl border-2 border-yellow-400 text-center max-w-full uppercase tracking-tighter">
                                            {currentWish || t.gameHint}
                                        </div>
                                    </div>
                                </div>
                            )}

                            {gameState === 'END' && (
                                <div className="absolute inset-0 z-30 flex flex-col items-center justify-center bg-red-900/95 backdrop-blur-lg p-2 sm:p-6 text-center text-white">
                                    <div className="start-modal bg-white/95 p-4 sm:p-8 rounded-[2rem] sm:rounded-[3rem] border-2 sm:border-4 border-yellow-500 shadow-2xl scale-in-center flex flex-col items-center max-w-[95%] sm:max-w-[90%] text-red-900">
                                        <div className="text-4xl sm:text-6xl mb-2 sm:mb-4 font-black">ğŸ§§</div>
                                        <h2 className="text-2xl sm:text-5xl font-black text-red-600 mb-1 italic tracking-tighter text-center">{t.resultTitle}</h2>
                                        <p className="text-sm sm:text-xl mb-4 sm:mb-8 text-center uppercase tracking-tighter">
                                            {t.resultBody} <span className="text-2xl sm:text-5xl font-black text-red-600 mx-1">{score}</span> {t.resultUnit}
                                        </p>
                                        <button onClick={startGame} className="bg-red-600 hover:bg-red-500 text-yellow-300 px-8 py-3 sm:px-12 sm:py-4 rounded-full text-lg sm:text-3xl font-black shadow-lg hover:scale-105 active:scale-95 transition-all flex items-center gap-2 mb-4 uppercase tracking-tighter">
                                            <IconRotate /> {t.retry}
                                        </button>
                                        <GameDisclaimer />
                                    </div>
                                </div>
                            )}

                            {floatingTexts.map(f => <div key={f.id} className="absolute pointer-events-none text-xl sm:text-3xl font-black text-red-600 animate-float-up-fast z-40 drop-shadow-md whitespace-nowrap uppercase tracking-tighter" style={{ left: f.x, top: f.y }}>{f.text}</div>)}
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<HorseGameApp />);
    </script>
</body>
</html>